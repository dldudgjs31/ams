<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ams.classes.model.dao.ClassDao">

    <insert id="insertClass" parameterType="com.ams.classes.model.dto.ClassDto">
		insert into a_class(c_nm,c_color,c_cap,t_idx,c_detail,c_st_tm,c_ed_tm,c_wkd)
		values(#{c_nm},#{c_color},#{c_cap},#{t_idx},#{c_detail},#{c_st_tm},#{c_ed_tm},#{c_wkd})
	</insert>

    <update id="updateStClass" parameterType="java.util.Map">
        update a_member
        set c_idx = 
            (
                select c_idx 
                from a_class 
                where c_nm=#{c_nm} 
                and c_color=#{c_color} 
                and c_detail=#{c_detail}
            )
        where st_idx = #{st_idx}
    </update>

    <select id="getAllClasses" resultType="com.ams.classes.model.dto.ClassDto">
        select c_nm,c_idx,c_color,c_cap,t_idx,c_detail,c_st_tm,c_ed_tm,c_wkd from a_class
    </select>
    <select id="countStClass" parameterType="Integer" resultType="Integer">
        select count(*) as totalStudent from a_member where c_idx = #{c_idx}
    </select>
  
</mapper>